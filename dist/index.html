<!DOCTYPE html>
<html lang="jp">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Chango&family=Londrina+Shadow&display=swap"
			rel="stylesheet"
		/>
		<link rel="stylesheet" href="style.css" />

		<title>Dentaku</title>
	</head>
	<body class="font-Chango">
		<div class="container">
			<!-- main -->
			<div class="bg-chocolate-b text-chocolate-lb text-7xl">
				<!-- display -->
				<div class="btn justify-end">
					<p id="display" class="text-chocolate-lb text-3xl md:text-6xl"></p>
				</div>
				<!-- AC C -->
				<div class="flex">
					<div onclick="ac()" id="ac" class="btn justify-center">
						<p>AC</p>
					</div>
					<div onclick="c()" id="c" class="btn justify-center">
						<p>C</p>
					</div>
				</div>
				<!-- 7 8 9 ÷ -->
				<div class="flex">
					<div onclick="pushButton(7)" id="num7" class="btn justify-center">
						<p>7</p>
					</div>
					<div onclick="pushButton(8)" id="num8" class="btn justify-center">
						<p>8</p>
					</div>
					<div onclick="pushButton(9)" id="num9" class="btn justify-center">
						<p>9</p>
					</div>
					<div
						onclick="pushButton(14)"
						id="division"
						class="btn justify-center"
					>
						<p>÷</p>
					</div>
				</div>
				<!-- 4 5 6 × -->
				<div class="flex">
					<div onclick="pushButton(4)" id="num4" class="btn justify-center">
						<p>4</p>
					</div>
					<div onclick="pushButton(5)" id="num5" class="btn justify-center">
						<p>5</p>
					</div>
					<div onclick="pushButton(6)" id="num6" class="btn justify-center">
						<p>6</p>
					</div>
					<div
						onclick="pushButton(13)"
						id="multiplication"
						class="btn justify-center"
					>
						<p>×</p>
					</div>
				</div>
				<!-- 1 2 3 - -->
				<div class="flex">
					<div onclick="pushButton(1)" id="num1" class="btn justify-center">
						<p>1</p>
					</div>

					<div onclick="pushButton(2)" id="num2" class="btn justify-center">
						<p>2</p>
					</div>
					<div onclick="pushButton(3)" id="num3" class="btn justify-center">
						<p>3</p>
					</div>
					<div
						onclick="pushButton(12)"
						id="subtraction"
						class="btn justify-center"
					>
						<p>-</p>
					</div>
				</div>
				<!-- 0 = - -->
				<div class="flex">
					<div onclick="pushButton(0)" id="num0" class="btn justify-center">
						<p>0</p>
					</div>
					<div onclick="pushButton(15)" id="equal" class="btn justify-center">
						<p>=</p>
					</div>
					<div
						onclick="pushButton(11)"
						id="addition"
						class="btn justify-center"
					>
						<p>+</p>
					</div>
				</div>
			</div>
		</div>
		<script>
			var oldN = 0;
			var sSymbol = [];
			var sNumber = [];
			var inputNum = 0;
			var arit, doNum, answer;
			var sStatus = [];
			const sta1 = 1;
			const sta2 = 2;
			const sta3 = 3;
			console.log("sStatus:" + sStatus);
			var displayElm = document.getElementById("display");

			function display(num) {
				//画面表示
				displayElm.textContent = num;
			}

			function inNumB(num) {
				// 数入力
				inputNum = oldN + num;
				oldN = inputNum * 10;
				//console.log(inputNum);
				display(inputNum);
			}
			function pushNum() {
				sNumber.push(inputNum);
				oldN = 0;
			}
			function pushSym(num) {
				// 記号push・数push
				switch (num) {
					case 11:
						sSymbol.push("+");
						break;
					case 12:
						sSymbol.push("-");
						break;

					case 13:
						sSymbol.push("*");
						break;
					case 14:
						sSymbol.push("/");
						break;
				}
				console.log("sSymbol:" + sSymbol);
				console.log("sNumber:" + sNumber);
			}

			function calculation(sNumber, sSymbol) {
				// 計算
				var l = sSymbol.length;
				var i = 0;
				while (l == i) {
					console.log("revarce");
					popS = sSymbol.pop();
					calSym.push(popS);
					popN = sNumber.pop();
					calNum.push(popN);
					i++;
				}
				while (calSym.length != 0) {
					arit = calSym.pop();
					if (arit == "+") {
						calNum.push(calNum.pop() + calNum.pop());
					} else if (arit == "*") {
						calNum.push(calNum.pop() * calNum.pop());
					} else if (arit == "-") {
						doNum = calNum.pop();
						calNum.push(calNum.pop() - doNum);
					} else if (arit == "/") {
						doNum = calNum.pop();
						if (doNum != 0) {
							calNum.push(calNum.pop() / doNum);
						} else {
							display("error");
							break;
						}
					}

					// console.log("sSymbol:" + sSymbol);
					// console.log("sNumber:" + sNumber);
					console.log("calSym:" + calSym);
					console.log("calNum:" + calNum);
				}
			}

			function pushButton(num) {
				// 入力受付
				switch (num) {
					case 1:
					case 2:
					case 3:
					case 4:
					case 5:
					case 6:
					case 7:
					case 8:
					case 9:
					case 0:
						inNumB(num);

						break;
					case 11:
					case 12:
					case 13:
					case 14:
						pushNum();
						sStatus.push(sta1);
						console.log("sStatus:" + sStatus);

						pushSym(num);
						sStatus.push(sta2);
						console.log("sStatus:" + sStatus);

						break;
					case 15:
						pushNum();
						sStatus.push(sta1);
						console.log("sStatus:" + sStatus);
						calculation(sNumber, sSymbol);
						sStatus.push(sta3);
						console.log("sStatus:" + sStatus);
						display(sNumber);
						break;
				}
			}
			display(inputNum); //初期画面の0を表示する
		</script>
	</body>
</html>
